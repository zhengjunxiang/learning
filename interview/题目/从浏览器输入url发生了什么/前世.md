# DNS解析
客户端 -> 本地域名服务器 -> 根域名服务器 -> 顶级域名服务器 -> xxx服务器

# HTTP建立连接

- TCP 三次握手
(你也是这趟航班吗，这家店的卡布奇诺味道不错，你可以尝尝)
  1. 客服端向服务端发送报文，发出请求 SYN=1，同时选择一个初始的序列号 seq=x
    
    服务端状态就从 LISTEN 变成 SYNC_RCVD


(enen, 我也喜欢这家店的卡布奇诺，你是来出差的吗，我家就在附近，你呢)
  2. 服务端发送确认报文，SYN=1, ACK=1, ack=x+1 



(是的，我是来出差的，我坐在商务仓，所以没怎么见过你)
  3. 服务端, 客户端 状态都变成 ESTABLISHED

# 数据传输

- TCP 四次挥手

  1. 客户端认为数据发送完成，向服务端发送链接释放请求
(今天坐飞机有点累，挺晚了，我们都在早休息吧)


  2. 服务端发送ACK包，进入 CLOSE_WAIT 状态，此时连接已经释放，服务端不在接受客户端发送的数据了，但是依然可以向客户端发送数据
(那我去洗漱了，你先早点休息吧)


  3. 如果服务端还有没发完的数据，会继续发送，完毕后会向客户端发送链接释放请求，服务端进入LAST—ACK状态
(我收拾好了，我准备关灯睡觉了，晚安)

  4. 客户端接收到了释放请求后，向服务端确认应答，客户端进入 TIME-WAIT 状态，持续2MSL，如果没有再接收到服务端的任何请求，就进入CLOSED状态。服务端接收到了确认应答也进入到CLOSED状态
(晚安)



# 持续2MSL
为了保证服务端正常关闭



# 为什么一定要三次握手，明明两次就可以？

